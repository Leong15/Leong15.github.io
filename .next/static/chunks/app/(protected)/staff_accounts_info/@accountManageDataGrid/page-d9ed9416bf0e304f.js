(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5196],{71514:(e,r,a)=>{Promise.resolve().then(a.bind(a,9562))},12488:(e,r,a)=>{"use strict";a.d(r,{default:()=>f});var t=a(12115),o=a(43463),l=a(47156),n=a(9808),s=a(54116),i=a(3770),c=a(95155),d=a(82795),u=a(71384),h=a(26366);let p=(0,a(81045).A)("MuiBox",["root"]),x=(0,u.A)(),f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{themeId:r,defaultTheme:a,defaultClassName:d="MuiBox-root",generateClassName:u}=e,h=(0,l.Ay)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(n.A);return t.forwardRef(function(e,t){let l=(0,i.A)(a),{className:n,component:p="div",...x}=(0,s.A)(e);return(0,c.jsx)(h,{as:p,ref:t,className:(0,o.A)(n,u?u(d):d),theme:r&&l[r]||l,...x})})}({themeId:h.A,defaultTheme:x,defaultClassName:p.root,generateClassName:d.A.generate})},76046:(e,r,a)=>{"use strict";var t=a(66658);a.o(t,"useRouter")&&a.d(r,{useRouter:function(){return t.useRouter}}),a.o(t,"useSearchParams")&&a.d(r,{useSearchParams:function(){return t.useSearchParams}})},9562:(e,r,a)=>{"use strict";a.d(r,{default:()=>w});var t=a(95155),o=a(12115),l=a(72761),n=a(20211),s=a(22282),i=a(76046),c=a(2615);let d=e=>{let{portalName:r,searchID:a}=e,{data:l}=(0,c.useSession)(),[n,d]=(0,o.useState)(!1),u=(0,i.useRouter)();if(""===a)return"";async function h(e,r,a,t){try{let o=await fetch("".concat("http://localhost:3000","/api/userActionRecord"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userid:r,portalName:e,action:a,actionUser:t})});await o.json()}catch(e){console.error("Error fetching user data:",e)}}async function p(e,r,a){d(!0);try{let t=await fetch("".concat("http://localhost:3000","/api/createHandler"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userid:r,portalName:e})}),o=await t.json();t.ok?(h(e,r,a,null==l?void 0:l.user.name),alert("Create Successfully"),u.refresh()):alert("Unsuccessful. "+o.error),d(!1)}catch(e){console.error("Error fetching user data:",e),d(!1)}}async function x(e,r,a){d(!0);try{let t=await fetch("".concat("http://localhost:3000","/api/lockHandler"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userid:r,portalName:e,action:a})}),o=await t.json();t.ok?(h(e,r,a,null==l?void 0:l.user.name),alert(o),u.refresh()):alert(o),d(!1)}catch(e){console.error("Error fetching user data:",e),d(!1)}}return(0,t.jsxs)("div",{children:[(0,t.jsx)(s.A,{sx:{marginRight:"10px","&:hover":{boxShadow:"0 0 10px 1px rgba(189, 124, 3, 0.92)"},boxShadow:"0 0 10px 1px rgba(253, 180, 45, 0.86)"},onClick:()=>{p(r,a,"create")},loading:n,children:"Create"}),(0,t.jsx)(s.A,{sx:{marginRight:"10px","&:hover":{boxShadow:"0 0 10px 1px rgba(207, 14, 1, 0.88)"},boxShadow:"0 0 10px 1px rgba(252, 63, 49, 0.7)"},onClick:()=>{x(r,a,"locked")},loading:n,children:"Lock"}),(0,t.jsx)(s.A,{sx:{"&:hover":{boxShadow:"0 0 10px 1px rgba(207, 14, 1, 0.88)"},boxShadow:"0 0 10px 1px rgba(252, 63, 49, 0.7)"},onClick:()=>{x(r,a,"unlocked")},loading:n,children:"Unlock"})]})};var u=a(48173),h=a.n(u),p=a(72926),x=a(12488),f=a(92803),m=a(70152),v=a(30245),b=a.n(v);let N=e=>{let{setNameFilter:r,portalName:a}=e;return(0,t.jsx)(x.default,{className:b().container,children:(0,t.jsx)(f.A,{disablePortal:!0,options:a,className:b().searchPortal,renderInput:e=>(0,t.jsx)(m.A,{...e,label:"Search Portal"}),onChange:(e,a)=>r(null!=a?a:"")})})};var g=a(35436),j=a.n(g);let w=e=>{let{data:r,staff_id:a}=e,[s,i]=(0,o.useState)(""),c=[{field:"id",headerName:"ID",flex:1},{field:"name",headerName:"Portal",flex:1},{field:"ip",headerName:"DB Server",flex:1},{field:"link",headerName:"Link",flex:1,renderCell:e=>{var r;return(0,t.jsx)(h(),{href:null!==(r=e.value)&&void 0!==r?r:"",target:"_blank",rel:"noopener noreferrer",children:e.value})}},{field:"description",headerName:"description",flex:1},{field:"account_num",headerName:"Account Number",flex:.5,renderCell:e=>(0,t.jsx)("span",{style:{fontWeight:"0"==e.value?"bold":"normal",color:"0"==e.value?"red":"inherit"},children:e.value})},{field:"isActive",headerName:"isActive",flex:.5,renderCell:e=>(0,t.jsx)("span",{style:{fontWeight:!1==e.value?"bold":"normal",color:!1==e.value?"red":"inherit"},children:"boolean"==typeof e.value?e.value.toString():e.value})},{field:"create_btn",headerName:"Create/Lock",flex:1,sortable:!1,renderCell:e=>(0,t.jsx)("div",{className:j().createBtn,children:"Create by UI"!=e.row.ip&&"10.10.10.109"!=e.row.ip?(0,t.jsx)(d,{portalName:e.row.name,searchID:null==a?"":a}):""})}],[u]=(0,o.useState)({id:!1,description:!1}),x=null==r?void 0:r.filter(e=>""===s||e.name.includes(s)),f=r.map(e=>e.name);return(0,t.jsxs)("div",{className:"parent",children:[(0,t.jsx)(N,{setNameFilter:i,portalName:f}),(0,t.jsx)("div",{className:"child",children:(0,t.jsx)(n.z,{rows:x,columns:c||[],columnVisibilityModel:u,slots:{row:e=>(0,t.jsx)(p.A,{placement:"bottom",title:(0,t.jsx)("div",{style:{whiteSpace:"pre-wrap"},children:null==e.row.description?"No description":e.row.description}),sx:{font:"10px"},children:(0,t.jsx)(l.T,{...e})})}})})]})}},35436:e=>{e.exports={createBtn:"PortalDataGrid_createBtn__my6n8"}},30245:e=>{e.exports={container:"PortalManageFilter_container__oHv6T",searchPortal:"PortalManageFilter_searchPortal__EiAKn"}}},e=>{var r=r=>e(e.s=r);e.O(0,[6484,41,595,947,3318,7420,211,2615,8173,8441,1517,7358],()=>r(71514)),_N_E=e.O()}]);