(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2704],{52506:(e,a,l)=>{Promise.resolve().then(l.bind(l,20281))},20281:(e,a,l)=>{"use strict";l.d(a,{default:()=>F});var t=l(95155),s=l(12115),r=l(12488),i=l(70152),n=l(22678),c=l(90507),o=l(19212),d=l(91888),u=l(22282),_=l(63693),h=l.n(_);let m=e=>{let{nameFilter:a,setNameFilter:l,roleFilter:s,setRoleFilter:_,emailFilter:m,setEmailFilter:v,accFilter:f,setAccFilter:x,activeFilter:j,setActiveFilter:p}=e;return(0,t.jsxs)(r.default,{className:h().filterBox,children:[(0,t.jsx)(i.A,{label:"Search Name",value:a,onChange:e=>l(e.target.value),variant:"outlined",size:"small"}),(0,t.jsx)(i.A,{label:"Search Email",value:m,onChange:e=>v(e.target.value),variant:"outlined",size:"small"}),(0,t.jsxs)(n.A,{className:h().roleInput,size:"small",children:[(0,t.jsx)(c.A,{children:"Role"}),(0,t.jsxs)(o.A,{value:s,onChange:e=>_(e.target.value),label:"Role",children:[(0,t.jsx)(d.A,{value:"",children:"All"}),["ADMIN","USER"].map(e=>(0,t.jsx)(d.A,{value:e,children:e},e))]})]}),(0,t.jsxs)(n.A,{className:h().accessLvInput,size:"small",children:[(0,t.jsx)(c.A,{children:"Access Level"}),(0,t.jsxs)(o.A,{value:f,onChange:e=>x(e.target.value),label:"Access Level",children:[(0,t.jsx)(d.A,{value:"",children:"All"}),[1,2].map(e=>(0,t.jsx)(d.A,{value:e.toString(),children:e},"level"+e))]})]}),(0,t.jsxs)(n.A,{className:h().activeInput,size:"small",children:[(0,t.jsx)(c.A,{children:"Active"}),(0,t.jsxs)(o.A,{value:j,onChange:e=>p(e.target.value),label:"Active",children:[(0,t.jsx)(d.A,{value:"",children:"All"}),[1,0].map(e=>(0,t.jsx)(d.A,{value:e.toString(),children:1===e?"Active":"In-Active"},"active"+e))]})]}),(0,t.jsx)(u.A,{variant:"outlined",onClick:()=>{l(""),v(""),_(""),x(""),p("")},className:h().clearBtn,children:"Clear"})]})};var v=l(20211),f=l(78416),x=l(36417),j=l(27753),p=l(9561),A=l(99489),g=l(26214),C=l(55589),b=l.n(C);let N=e=>{let{onClose:a,open:l,rowDetail:_,onUpdate:h}=e,[m,v]=(0,s.useState)(0),[C,N]=(0,s.useState)(""),[U,D]=(0,s.useState)(""),[S,I]=(0,s.useState)(""),[y,B]=(0,s.useState)(2),[L,w]=(0,s.useState)(0);(0,s.useEffect)(()=>{if(_){var e,a;v(_.id),N(_.username),D(null!==(e=_.email)&&void 0!==e?e:""),I(_.role),B(null!==(a=_.acc_level_id)&&void 0!==a?a:2),w(_.active)}},[_]);let F=async e=>{try{let l=await fetch("/api/updateUserInfo",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});l.ok?(await l.json(),alert("Update Successful"),h(),a()):(alert("Update Unsuccessful, Please try again later."),console.error("Failed to update user"))}catch(e){alert("Update Unsuccessful, Please try again later."),console.error("Error:",e)}};return(0,t.jsxs)(f.A,{open:l,onClose:a,children:[(0,t.jsx)(x.A,{children:"Row Details"}),(0,t.jsx)(j.A,{children:(0,t.jsxs)(r.default,{className:b().container,children:[(0,t.jsx)(p.default,{className:b().userlabel,variant:"body1",children:"Username:"}),(0,t.jsx)(i.A,{className:b().userinputfield,id:"username",variant:"outlined",onChange:e=>N(e.target.value),value:C}),(0,t.jsx)(p.default,{className:b().emaillabel,children:"Email: "}),(0,t.jsx)(i.A,{className:b().emailinputfield,id:"email",variant:"outlined",onChange:e=>D(e.target.value),value:U}),(0,t.jsxs)(n.A,{fullWidth:!0,className:b().rolefield,children:[(0,t.jsx)(c.A,{id:"roleLabel",children:"Role"}),(0,t.jsx)(o.A,{labelId:"roleLabel",id:"demo-simple-select",value:S,label:"Role",onChange:e=>I(e.target.value),children:["ADMIN","USER"].map(e=>(0,t.jsx)(d.A,{value:e,children:e},"role"+e))})]}),(0,t.jsxs)(n.A,{fullWidth:!0,className:b().accfield,children:[(0,t.jsx)(c.A,{id:"accLabel",children:"Access Level"}),(0,t.jsx)(o.A,{labelId:"accLabel",id:"demo-simple-select",value:y,label:"Access Level",onChange:e=>B(e.target.value),children:[1,2].map(e=>(0,t.jsx)(d.A,{value:e,children:e},"level"+e))})]}),(0,t.jsxs)(r.default,{className:b().activeDropDownContainer,children:[(0,t.jsx)(p.default,{id:"activelabel",className:b().activelabel,children:"Active:"}),(0,t.jsx)(A.A,{checked:1===L,onChange:e=>{w(e.target.checked?1:0)}})]})]})}),(0,t.jsxs)(g.A,{children:[(0,t.jsx)(u.A,{className:b().updateBtn,onClick:()=>F({id:m,username:C,email:U,role:S,acc_level_id:y,active:L}),color:"primary",children:"Update"}),(0,t.jsx)(u.A,{className:b().closeBtn,onClick:a,color:"primary",children:"Close"})]})]})};var U=l(70453),D=l.n(U);let S=e=>{let{data:a,onUpdate:l,cols:r}=e,[i,n]=(0,s.useState)(!1),[c,o]=(0,s.useState)(null),[d]=(0,s.useState)({id:!1});return(0,t.jsxs)("div",{className:D().container,children:[(0,t.jsx)(v.z,{rows:a||[],columns:r||[],onRowDoubleClick:e=>{o(e.row),n(!0)},columnVisibilityModel:d}),(0,t.jsx)(N,{open:i,onClose:()=>{n(!1),o(null)},rowDetail:c,onUpdate:l})]})};var I=l(10329),y=l.n(I);let B=e=>{let{onClose:a,open:l,onUpdate:_}=e,[h,m]=(0,s.useState)(""),[v,j]=(0,s.useState)(""),[g,C]=(0,s.useState)(""),[b,N]=(0,s.useState)(""),[U,D]=(0,s.useState)(1),S=async e=>{try{let l=await fetch("/api/createUser",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});l.ok?(await l.json(),alert("Create Successful"),_(),a()):alert("Create Unsuccessful, Please try again later.")}catch(e){alert("Create Unsuccessful, Please try again later."),console.error("Error:",e)}};return(0,t.jsxs)(f.A,{onClose:()=>{a()},open:l,children:[(0,t.jsx)(x.A,{className:y().title,children:"Create New User"}),(0,t.jsxs)(r.default,{className:y().container,children:[(0,t.jsx)(p.default,{className:y().userlabel,variant:"body1",children:"Username:"}),(0,t.jsx)(i.A,{className:y().userinputfield,id:"username",label:"Username",variant:"outlined",onChange:e=>m(e.target.value)}),(0,t.jsx)(p.default,{className:y().emaillabel,children:"Email: "}),(0,t.jsx)(i.A,{className:y().emailinputfield,id:"email",type:"email",label:"Email",variant:"outlined",onChange:e=>j(e.target.value)}),(0,t.jsxs)(n.A,{fullWidth:!0,className:y().rolefield,children:[(0,t.jsx)(c.A,{id:"roleLabel",children:"Role"}),(0,t.jsx)(o.A,{labelId:"roleLabel",id:"demo-simple-select",value:g,label:"Role",onChange:e=>C(e.target.value),children:["ADMIN","USER"].map(e=>(0,t.jsx)(d.A,{value:e,children:e},"role"+e))})]}),(0,t.jsxs)(n.A,{fullWidth:!0,className:y().accfield,children:[(0,t.jsx)(c.A,{id:"accLabel",children:"Access Level"}),(0,t.jsx)(o.A,{labelId:"accLabel",id:"demo-simple-select",label:"Access Level",value:b,onChange:e=>N(e.target.value),children:[1,2].map(e=>(0,t.jsx)(d.A,{value:e,children:e},"level"+e))})]}),(0,t.jsxs)(r.default,{className:y().activeDropDownContainer,children:[(0,t.jsx)(p.default,{id:"activelabel",className:y().activelabel,children:"Active:"}),(0,t.jsx)(A.A,{defaultChecked:!0,onChange:e=>{D(e.target.checked?1:0)}})]})]}),(0,t.jsx)(r.default,{className:y().createBtnContainer,children:(0,t.jsx)(u.A,{className:y().createBtn,onClick:()=>S({username:h,email:v,role:g,acc_level_id:b,active:U}),children:(0,t.jsx)("b",{children:"Create"})})})]})};var L=l(23946),w=l.n(L);let F=e=>{let{data:a}=e,[l,i]=(0,s.useState)(a),[n,c]=(0,s.useState)(""),[o,d]=(0,s.useState)(""),[_,h]=(0,s.useState)(""),[v,f]=(0,s.useState)(""),[x,j]=(0,s.useState)(""),[p,A]=(0,s.useState)(!1),g=async()=>{try{let e=await fetch("/api/updateUserInfo"),a=await e.json();i(a)}catch(e){console.error("Error refreshing data:",e)}},C=null==l?void 0:l.filter(e=>{var a,l;return(""===o||e.role===o)&&(""===n||e.username.includes(n))&&(""===_||(null===(a=e.email)||void 0===a?void 0:a.includes(_)))&&(""===v||(null===(l=e.acc_level_id)||void 0===l?void 0:l.toString())===v)&&(""===x||e.active.toString()===x)});return(0,t.jsxs)("div",{className:"parent",children:[(0,t.jsxs)(r.default,{className:w().outerContainer,children:[(0,t.jsx)(r.default,{className:w().filterContainer,children:(0,t.jsx)(m,{nameFilter:n,setNameFilter:c,roleFilter:o,setRoleFilter:d,emailFilter:_,setEmailFilter:h,accFilter:v,setAccFilter:f,activeFilter:x,setActiveFilter:j})}),(0,t.jsx)(r.default,{className:w().buttonContainer,children:(0,t.jsx)(u.A,{variant:"outlined",onClick:()=>{A(!0)},className:w().createButton,children:(0,t.jsx)("b",{children:"Create New User"})})})]}),(0,t.jsx)(B,{open:p,onClose:()=>{A(!1)},onUpdate:g}),(0,t.jsx)("div",{className:"child",children:(0,t.jsx)(S,{data:C,onUpdate:g,cols:[{field:"id",headerName:"ID",flex:1},{field:"username",headerName:"Username",flex:1},{field:"email",headerName:"Email",flex:1},{field:"role",headerName:"Role",flex:1},{field:"acc_level_id",headerName:"Access Level",flex:1},{field:"active",headerName:"Active",flex:1}]})})]})}},10329:e=>{e.exports={title:"CreateUserDialog_title__nqd1z",container:"CreateUserDialog_container__3_9fX",userlabel:"CreateUserDialog_userlabel__lKHUA",userinputfield:"CreateUserDialog_userinputfield__Vl3Gv",emaillabel:"CreateUserDialog_emaillabel__Bz96m",emailinputfield:"CreateUserDialog_emailinputfield__Xy_nT",rolefield:"CreateUserDialog_rolefield__vmKpb",accfield:"CreateUserDialog_accfield__aAlmI",activelabel:"CreateUserDialog_activelabel__rCcOr",activeDropDownContainer:"CreateUserDialog_activeDropDownContainer__uLp89",createBtnContainer:"CreateUserDialog_createBtnContainer__plMri",createBtn:"CreateUserDialog_createBtn__5YqPT"}},70453:e=>{e.exports={container:"UserDataGrid_container__nLFz5"}},55589:e=>{e.exports={container:"UserInfoDialog_container__8cWgD",userlabel:"UserInfoDialog_userlabel__aYkK_",userinputfield:"UserInfoDialog_userinputfield__KpGoX",emaillabel:"UserInfoDialog_emaillabel__yqDVy",emailinputfield:"UserInfoDialog_emailinputfield__7xInS",rolefield:"UserInfoDialog_rolefield__CtM_z",accfield:"UserInfoDialog_accfield__z_mAM",activelabel:"UserInfoDialog_activelabel__GIhma",activeDropDownContainer:"UserInfoDialog_activeDropDownContainer__MGi8F",updateBtn:"UserInfoDialog_updateBtn__FlLHf",closeBtn:"UserInfoDialog_closeBtn__Ia3fN"}},63693:e=>{e.exports={filterBox:"UserMangeFilter_filterBox__niHSI",roleInput:"UserMangeFilter_roleInput__I18a6",accessLvInput:"UserMangeFilter_accessLvInput__Mc_jL",activeInput:"UserMangeFilter_activeInput__WiEnD",clearBtn:"UserMangeFilter_clearBtn__JZeHA"}},23946:e=>{e.exports={outerContainer:"userManageDashboard_outerContainer__aXh2a",filterContainer:"userManageDashboard_filterContainer__sq_Zm",buttonContainer:"userManageDashboard_buttonContainer__i2Pze",createButton:"userManageDashboard_createButton__6PSuV"}}},e=>{var a=a=>e(e.s=a);e.O(0,[7771,41,595,947,3318,7420,211,3115,6658,8441,1517,7358],()=>a(52506)),_N_E=e.O()}]);